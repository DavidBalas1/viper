syntax = "proto3";

option go_package = "./cmds";

service Agent {
  rpc RunShellCommand (stream ShellCommandResponse) returns (stream ShellCommandRequest) {}
}

service AgentManager {
  rpc RunShellCommand (ShellCommandRequest) returns (ShellCommandResponse) {}
  rpc GetAgents(Empty) returns (stream AgentInfo) {}
}

message ShellCommandRequest {
  string cmd = 1;
  string Addr = 2;
}

message ShellCommandResponse {
  bytes output = 1;
}

message AgentInfo {
  string Addr = 1;
}

message Empty {}
